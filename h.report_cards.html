<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <title>Breman Islamic Academy - Report Cards</title>
    <style>
        /* Your existing CSS styles remain unchanged */
        .one { position: absolute; top: 3em; right: 11.5em; }
        #schoolName { position: absolute; right: 14em; height: 1.7em; width: 4em; }
        .content { transition: margin-left 0.3s ease; margin-left: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        #generate { background: seagreen; color: white; padding: 3px 5px; width: 80%; border-radius: 20px; font-size: 15px; margin-top: 50px; border: none; position: relative; left: 2em; }
        fieldset { border: none; border-radius: 8px; padding: 2em 0; margin-left: auto; height: 100%; max-height: 25em; position: relative; top: 2em; background: mediumorchid; width: 100%; max-width: 40em; box-shadow: 0 0 10px rgba(200, 150, 300, 0.9); }
        #termSelect, #classSelect { max-width: 15em; margin-left: 5em; text-align: center; }
        #yearSelect { max-width: 20em; margin-left: 4.2em; text-align: center; }
        legend { background: gold; color: blue; padding: 5px; border-radius: 15px; width: 80%; max-width: 40em; }
        p { margin-top: 2em; display: flex; flex-direction: column; }
        #studentName, select { border-radius: 1em; margin-left: 1em; text-align: center; }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="left_me">
            <button id="toggle-button" onclick="toggleSidebar()" title="Toggle Sidebar">â‰¡</button>
        </div>
        <form action="https://www.google.com/search" method="get" style="display: inline;" class="one">
            <input type="text" name="q" placeholder="Search Google" id="input" required>
            <button type="submit" id="search" style="border: none; background: burlywood;"><b id="go">GO</b></button>
        </form>
        <div class="right_us">
            <img id="schoolName" src="i.nav.jpg">
            <button title="Current Page" id="current">Report Cards</button>
            <button onclick="openEmailPopup()" id="mail">Email</button>
            <button onclick="openContactPopup()" id="call">Contact</button>
        </div>
    </nav>
    <div class="main-container">
        <aside class="sidebar" id="sidebar">
            <img src="i.Breman Islamic Bage 1.jpg" alt="School Badge" id="side">
            <br><b style="margin-left: 60px;">BIA.EDU</b><br><b style="margin-left: 35px;">BREMAN ASIKUMA</b>
            <ul>
                <li><button id="home" class="button"><a href="index.html">Home</a></button></li>
                <li><button id="report_cards" class="button active"><a href="h.report_cards.html" style="color: blue;"><b>Report Cards</b></a></button></li>
                <li><button id="exams" class="button"><a href="h.exams.html">Exams</a></button></li>
                <li><button id="gallery" class="button"><a href="h.gallery.html">Gallery</a></button></li>
                <li><button id="audios" class="button"><a href="h.audios.html">Audios</a></button></li>
                <li><button id="admission" class="button"><a href="h.admission.html">Admission</a></button></li>
            </ul>
        </aside>
        <main class="content" id="content">
            <form id="loginForm">
                <fieldset class="report_cards">
                    <legend><b>Student Report Card Checking</b></legend>
                    <p>
                        <label for="studentName"><b>Student Name:</b></label>
                        <input type="text" id="studentName" placeholder="- - -enter your full name- - -" style="text-transform: uppercase; width: 20em;" required>
                    </p>
                    <p>
                        <b><label for="classSelect">Class:</label></b>
                        <select id="classSelect" required>
                            <option>- - - Select Class - - -</option>
                            <option>Nursery</option>
                            <option>KG 1</option>
                            <option>KG 2</option>
                            <option>Basic 1</option>
                            <option>Basic 2</option>
                            <option>Basic 3</option>
                            <option>Basic 4</option>
                            <option>Basic 5</option>
                            <option>Basic 6</option>
                            <option>Form 1</option>
                            <option>Form 2</option>
                            <option>Form 3</option>
                        </select>
                    </p>
                    <p>
                        <b><label for="termSelect">Term:</label></b>
                        <select id="termSelect" required>
                            <option>- - - Select Term - - -</option>
                            <option>Term 1</option>
                            <option>Term 2</option>
                            <option>Term 3</option>
                        </select>
                    </p>
                    <p>
                        <b><label for="yearSelect">Academic Year:</label></b>
                        <select id="yearSelect" required>
                            <option>- - -Select Academic Year- - -</option>
                            <option>2025</option>
                            <option>2023/2024</optio>
                        </select>
                    </p>
                    <p>
                        <button id="generate" type="submit"><b>Generate Report Card</b></button>
                    </p>
                </fieldset>
            </form>
            <div id="result" style="display:none;"></div>
        </main>
    </div>

    <div class="overlay" id="overlay"></div>
    <div class="popup" id="emailPopup">
        <div class="popup-header">
            <h2>Email for Support</h2>
        </div>
        <div class="popup-content" id="popupContent">
            <p>Are you confused about something?<br>Don't worry, send a mail to:</p>
            <p><br><input id="help" type="email" value="abubakarabdulai@gmail.com" readonly style="position: absolute; left: 10%; bottom: 32%; width: 78%; padding-left: 5px; border-radius: 6px; text-align: center;"></p>
        </div>
        <div class="popup-footer">
            <button onclick="closePopup()">Close</button>
        </div>
    </div>

    <div class="popup" id="contactPopup">
        <div class="popup-header">
            <h2>Contact for Help</h2>
        </div>
        <div class="popup-content" id="popupContent">
            <p>Do you want to talk to the school management?</p>
            <p><strong>Headmaster Name:</strong>
                <input type="text" value="Abdulai Abubakar" readonly style="border-radius: 5px; width: 80%; text-align: center;">
            </p>
            <p><strong>Contact:</strong>
                <input type="text" value="0241303485" readonly style="border-radius: 5px; width: 80%; text-align: center;">
            </p>
        </div>
        <div class="popup-footer">
            <button onclick="closeContactPopup()">Close</button>
        </div>
    </div>

    <div class="overlay" id="confirmationOverlay" style="display:none;"></div>
    <div class="popup" id="confirmationPopup" style="display:none;">
        <div class="popup-header">
            <h2>Confirm Details</h2>
        </div>
        <div class="popup-content" id="popupContent">
            <p><strong>Student Name:</strong> <span id="confirmStudentName"></span></p>
            <p><strong>Class:</strong> <span id="confirmClass"></span></p>
            <p><strong>Term:</strong> <span id="confirmTerm"></span></p>
            <p><strong>Academic Year:</strong> <span id="confirmAcademicYear"></span></p>
        </div>
        <div class="popup-footer">
            <button id="agreeButton" style="background: green; color: white;">Agree</button>
            <button onclick="closeConfirmationPopup()" style="background: red; color: white;">Disagree</button>
        </div>
    </div>

    <script type="text/javascript" src="script.js"></script>
    <script type="text/javascript" src="2024.1.data.js"></script>
    <script type="text/javascript" src="2025.2.data.js"></script>
    <!-- Add more data files as needed -->

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            let combinedReportCards = [];

            function combineReportCards() {
                const reportCardsFiles = [
                    reportCards2024, // Ensure these variables are defined in your data files
                    reportCards2025
                ];

                reportCardsFiles.forEach(reportCards => {
                    if (Array.isArray(reportCards)) {
                        combinedReportCards = [...combinedReportCards, ...reportCards];
                    }
                });
            }

            combineReportCards(); // Call the function to combine data

            document.getElementById("loginForm").addEventListener("submit", function(event) {
                event.preventDefault(); // Prevents the default form submission

                const name = document.getElementById("studentName").value.toUpperCase();
                const classValue = document.getElementById("classSelect").value;
                const term = document.getElementById("termSelect").value;
                const academicYear = document.getElementById("yearSelect").value;

                // Show confirmation popup
                document.getElementById("confirmStudentName").innerText = name;
                document.getElementById("confirmClass").innerText = classValue;
                document.getElementById("confirmTerm").innerText = term;
                document.getElementById("confirmAcademicYear").innerText = academicYear;

                document.getElementById("confirmationOverlay").style.display = "block";
                document.getElementById("confirmationPopup").style.display = "block";
            });

            document.getElementById("agreeButton").addEventListener("click", function() {
                const name = document.getElementById("confirmStudentName").innerText;
                const classValue = document.getElementById("confirmClass").innerText;
                const term = document.getElementById("confirmTerm").innerText;
                const academicYear = document.getElementById("confirmAcademicYear").innerText;

                const student = combinedReportCards.find(s => 
                    s.studentName === name && 
                    s.class === classValue && 
                    s.term === term && 
                    s.academicYear === academicYear
                );

                if (student) {
                    // Store student data in local storage
                    localStorage.setItem("studentData", JSON.stringify(student));
                    // Redirect to report_cards_display.html
                    window.location.href = "h.report_cards_display.html"; // Ensure this file exists
                } else {
                    alert("Student not found. Please enter the correct details.");
                    closeConfirmationPopup();
                }
            });

            function closeConfirmationPopup() {
                document.getElementById("confirmationOverlay").style.display = "none";
                document.getElementById("confirmationPopup").style.display = "none";
            }
        });
    </script>
    <footer class="footer">
        <audio controls id="audio" autoplay loop>
            <source src="m.background-music.aac" type="audio/mpeg">
        </audio>
        <marquee>- - - Motto: Sovereignty Belongs to Allah - - -</marquee>
    </footer>
</body>
</html>
